<section class="cart" data-section-id="{{ section.id }}" data-section-type="cart-template">
  <div class="wrapper">
    <header class="content-util">
      {% include 'breadcrumb' %}
      {% include 'social-icons' %}
    </header>

    <div class="cart-container">
      <header class="cart-header">
        <h1>{{ 'cart.general.title' | t }}</h1>
      </header>
      {% if cart.item_count > 0 %}
        <div class="cart-list">
          <form action="/cart" method="post" novalidate class="cart-form">
            <div class="cart-items">
              <div class="label-row">
                <div class="grid">
                  <div class="td cart-item-product">
                    {{ 'cart.label.product' | t }}
                  </div>
                  <div class="td cart-item-price">
                    {{ 'cart.label.price' | t }}
                  </div>
                  <div class="td cart-item-quantity">
                    {{ 'cart.label.quantity' | t }}
                  </div>
                  <div class="td cart-item-total">
                    {{ 'cart.label.total' | t }}
                  </div>
                </div>
              </div>

              {% comment %}
                Loop through products in the cart
              {% endcomment %}
              {% for item in cart.items %}
                <div class="cart-item">
                  <div class="grid">
                    <div class="td cart-item-product">
                      <div class="cart-item-image">
                        {%- assign image = item.image -%}
                        <a
                          href="{{ item.url | within: collections.all }}"
                          class="card__image-wrapper"
                          style="padding-top:{{ 1 | divided_by: image.aspect_ratio | times: 100}}%"
                        >
                          {% if image %}
                            {{
                              image
                              | image_url: width: 600
                              | image_tag:
                                widths: '200, 400, 600',
                                sizes: '200px',
                                loading: 'lazy',
                                class: 'card__image'
                            }}
                          {% else %}
                            {{ 'image' | placeholder_svg_tag: 'card__image' }}
                          {% endif %}
                        </a>
                      </div>

                      <div class="cart-item-title">
                        <a href="{{ item.url | within: collections.all }}" class="title">
                          {{ item.product.title -}}
                          <span class="ga_cart_upsell" data-productid="{{ item.product_id }}"></span>
                        </a>
                        {% if section.settings.show_vendors %}
                          <span class="vendor">{{ item.vendor }}</span>
                        {% endif %}

                        {% unless item.product.has_only_default_variant %}
                          <span class="variant">{{ item.variant.title }}</span>
                        {% endunless %}
                      </div>

                      {% comment %}
                        Optional, loop through custom product line items if available

                        For more info on line item properties, visit:
                          - http://docs.shopify.com/support/your-store/products/how-do-I-collect-additional-information-on-the-product-page-Like-for-a-monogram-engraving-or-customization
                      {% endcomment %}
                      {% assign property_size = item.properties | size %}
                      {% if property_size > 0 %}
                        {%- for p in item.properties -%}
                          {% if p.first == '_bundle' %}{% continue %}{% endif -%}
                          {%- if p.first == '__is_bundle_product' %}{% continue %}{% endif -%}
                          {%- if p.first == '_upsell_bundle' %}{% continue %}{% endif -%}
                          {%- if p.first == '_bundle' %}{% continue %}{% endif -%}
                          {%- if p.first == '__is_bundle_product' %}{% continue %}{% endif -%}
                          {%- if p.first == '_upsell_bundle' %}{% continue %}{% endif %}
                          {% unless p.last == blank %}
                            {{ p.first }}:

                            {% comment %}
                              Check if there was an uploaded file associated
                            {% endcomment %}
                            {% if p.last contains '/uploads/' %}
                              <a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
                            {% else %}
                              {{ p.last }}
                            {% endif %}

                            <br>
                          {% endunless %}
                        {% endfor %}
                      {% endif %}
                    </div>
                    <div class="td cart-item-price" data-handle="{{item.product.handle}}">
                      <span class="money">{{ item.price | money }}</span>
                    </div>
                    <div class="td cart-item-quantity">
                      {% unless item.product.handle == 'elf-bar-3500-puff-disposable-elfs-choice'
                        or item.product.handle == 'daze-egge-3000-puff-disposable-easter-bunnys-choice'
                        or item.product.handle == 'free-space-gods'
                        or item.product.handle == 'staffs-choice-kado-bar-puff-disposable'
                        or item.product.handle == 'elf-bar-5000-puff-disposable-bc5000-case-10-pack'
                        or item.product.handle == 'staffs-choice-esco-bar-h2o-2500'
                      %}
                        <span>
                          <div class="quantity-select">
                            <div class="button-wrapper">
                              <button class="adjust adjust-minus">-</button>
                            </div>
                            <div class="input-wrapper">
                              <input
                                type="text"
                                class="quantity"
                                min="1"
                                pattern="[0-9]*"
                                name="updates[]"
                                id="updates_{{ item.id }}"
                                value="{{ item.quantity }}"
                              >
                            </div>
                            <div class="button-wrapper">
                              <button class="adjust adjust-plus">+</button>
                            </div>
                          </div>
                        </span>
                        <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" class="remove">
                          {{- 'cart.general.remove' | t -}}
                        </a>
                      {% else %}
                        <div class="input-wrapper">
                          <div class="quantity show">{{ item.quantity }}</div>
                          <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" class="remove">
                            {{- 'cart.general.remove' | t -}}
                          </a>
                        </div>
                      {% endunless %}
                    </div>
                    <div class="td cart-item-total">
                      <span class="money">{{ item.line_price | money }}</span>
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>

            <div class="grid">
              <div class="cart-notes"></div>
              <div class="cart-checkout">
                <p class="subtotal">
                  <span class="label"
                    ><span id="revy-cart-subtotal-label">{{ 'cart.general.subtotal' | t }}</span></span
                  >
                  <span class="price money"
                    ><span id="revy-cart-subtotal-price">{{ cart.total_price | money }}</span></span
                  >
                </p>
                <p class="shipping-at-checkout">
                  <em>{{ 'cart.general.shipping_at_checkout' | t }}</em>
                </p>
                {% if settings.show_multiple_currencies %}
                  <p class="currency-at-checkout">
                    <em>
                      {{-
                        'cart.general.currency_at_checkout_html'
                        | t: shop_name: shop.name, shop_currency: shop.currency
                      -}}
                    </em>
                  </p>
                {% endif %}
                <p style="float: none; text-align: middle; clear: both; margin: 10px 0;">
                  <input style="float:none; vertical-align: middle;" type="checkbox" id="agree">
                  <label style="display:inline; float:none" for="agree">
                    I confirm that I am 21 years of age or older and agree with our <a href="/pages/terms-conditions">Terms and Conditions</a>.
                  </label>
                </p>
                <input type="submit" name="update" class="button outline" value="{{ 'cart.general.update' | t }}">
                <input type="submit" name="checkout" class="button solid" value="{{ 'cart.general.checkout' | t }}">

                {% if additional_checkout_buttons %}
                  <div class="additional-checkout-buttons">{{ content_for_additional_checkout_buttons }}</div>
                {% endif %}
              </div>
            </div>
          </form>
        </div>
      {% else %}
        {% comment %}
          The cart is empty
        {% endcomment %}
        <p>
          {{ 'cart.general.empty' | t -}}
          <br>
          {{ 'cart.general.continue_browsing_html' | t }}
        </p>

        {% unless section.settings.extra_featured_products == blank %}
          {% assign collection_limit = 4 | plus: 0 %}
          <div class="simple-collection layout-{{ collection_limit }}">
            <div class="wrapper">
              <header>
                <h4>{{ collections[section.settings.extra_featured_products].title }}</h4>
                <a href="{{ collections[section.settings.extra_featured_products].url }}" class="button outline">
                  {{-
                    'collections.general.all_of_collection'
                    | t: collection: collections[section.settings.extra_featured_products].title
                  -}}
                </a>
              </header>
              <div class="product-container">
                {% for product in collections[section.settings.extra_featured_products].products
                  limit: collection_limit
                %}
                  {% include 'product-grid-item' %}
                {% else %}
                  {% for i in (1..collection_limit) %}
                    {% include 'placeholder-product-grid-item' %}
                  {% endfor %}
                {% endfor %}
              </div>
            </div>
          </div>
        {% endunless %}
      {% endif %}
    </div>
  </div>
</section>
{% schema %}
{
  "name": "Cart page",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_notes",
      "label": "Enable order notes",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_vendors",
      "label": "Show product vendors",
      "default": false
    },
    {
      "type": "header",
      "content": "Empty cart"
    },
    {
      "type": "collection",
      "id": "extra_featured_products",
      "label": "Empty cart collection"
    },
    {
      "type": "checkbox",
      "id": "variant_rollover",
      "label": "Show variant image on rollover",
      "default": true
    }
  ]
}
{% endschema %}
